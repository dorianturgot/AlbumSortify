import"./bootstrap.min-e3b02a47.js";const w=localStorage.getItem("userIDSpotify");document.querySelector("#album-list");const b=new URLSearchParams(window.location.search),m=b.get("listID"),C=new URLSearchParams(window.location.search),B=C.get("listName");console.log("userIDSpotify = "+w);var T=document.getElementById("YourLists");T.innerHTML+=B;g("name");document.getElementById("logoutBtnList").addEventListener("click",()=>{localStorage.removeItem("accessToken"),localStorage.removeItem("userIDSpotify"),window.location.href="http://localhost:4173/home.html"});document.getElementById("confirmDeleteListBtn").addEventListener("click",()=>{N(),k()});document.getElementById("sortNameBtn").addEventListener("click",()=>{document.getElementById("sortArtistBtn").classList.remove("active"),document.getElementById("sortNameBtn").classList.add("active"),document.getElementById("sortReleaseBtn").classList.remove("active"),I(),g("name")});document.getElementById("sortArtistBtn").addEventListener("click",()=>{document.getElementById("sortArtistBtn").classList.add("active"),document.getElementById("sortNameBtn").classList.remove("active"),document.getElementById("sortReleaseBtn").classList.remove("active"),I(),g("artist")});document.getElementById("sortReleaseBtn").addEventListener("click",()=>{document.getElementById("sortArtistBtn").classList.remove("active"),document.getElementById("sortNameBtn").classList.remove("active"),document.getElementById("sortReleaseBtn").classList.add("active"),I(),g("releaseDate DESC")});function I(){document.getElementById("albumList").innerHTML=""}function g(t){fetch("http://localhost:3000/list/"+m+"?sort="+t,{method:"GET",headers:{"Content-Type":"application/json"}}).then(e=>e.json()).then(e=>{const s=document.getElementById("albumList");e.forEach(a=>{const n=document.createElement("div");n.classList.add("card"),n.classList.add("mb-3"),n.classList.add("albumCard"),n.classList.add("cardList"),n.classList.add("text-center");const c=document.createElement("img");c.classList.add("albumCover"),c.classList.add("albumCoverList"),c.classList.add("card-img-top"),c.src=a.picture_url;const u=document.createElement("a");u.href=a.url,u.classList.add("albumCover");const r=document.createElement("div");r.classList.add("card"),r.classList.add("albumCard");const l=document.createElement("div");l.classList.add("card-body"),l.classList.add("albumCardBody");const L=document.createElement("h5");L.classList.add("card-title"),L.classList.add("albumName"),L.textContent=a.name;const i=document.createElement("p");i.classList.add("card-text"),i.classList.add("display-1"),i.classList.add("artistName"),i.textContent=a.artist;const h=document.createElement("p");h.classList.add("card-text"),h.classList.add("artistYear");const y=document.createElement("small");y.classList.add("text-muted"),y.textContent=x(a.releaseDate),h.appendChild(y);const E=document.createElement("p");E.classList.add("card-text"),E.classList.add("artistYear");const v=document.createElement("small");v.classList.add("text-muted"),v.textContent=a.total_tracks+" Tracks",E.appendChild(v);var o=document.createElement("button");o.classList.add("btn"),o.classList.add("btn-danger"),o.classList.add("deleteBtn");const p=document.createElement("i");p.classList.add("fa"),p.classList.add("fa-minus"),p.style.color="white",o.appendChild(p),o.addEventListener("click",()=>{D(a.id)});var d=document.createElement("button");d.classList.add("btn"),d.classList.add("btn-success"),d.classList.add("listenInSpotify");const f=document.createElement("i");f.classList.add("fab"),f.classList.add("fa-spotify"),d.appendChild(f),d.addEventListener("click",()=>{console.log(a.spotifyID),window.open("spotify:album:"+a.spotifyID,"_blank")}),u.innerHTML=c.outerHTML,l.appendChild(L),l.appendChild(i),l.appendChild(h),l.appendChild(E),r.appendChild(d),r.appendChild(l),n.appendChild(o),n.appendChild(u),n.appendChild(r),s.append(n)})})}function D(t){fetch("http://localhost:3000/albums/"+t,{method:"DELETE",headers:{"Content-Type":"application/json"}}).then(e=>{if(e.status===500)throw new Error("Server Error: "+e.statusText);return e.json()}).then(e=>{console.log("Album deleted:",e),document.getElementById("deletedAlert").classList.remove("d-none"),window.location.href="list.html?listID="+m+"&listName="+B}).catch(e=>{console.error("Error deleting album:",e),alert("Error deleting album.")})}document.getElementById("newListModal");document.getElementById("newListName").value=B;var S=document.getElementById("confirmBtnNewList");S.onclick=function(){const t=document.getElementById("newListName").value,e=document.getElementById("colorPicker").value;if(t===""){alert("Please enter a name for the list.");return}fetch("http://localhost:3000/albumlist/"+m,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:t,color:e})}).then(s=>{if(s.status===500)throw new Error("Server Error: "+s.statusText);return s.json()}).then(s=>{console.log("List updated:",s),document.getElementById("updatedAlert").classList.remove("d-none")}).catch(s=>{console.error("Error updating list:",s),alert("Error updating list.")})};function k(){fetch("http://localhost:3000/albumlist/"+m,{method:"DELETE",headers:{"Content-Type":"application/json"}}).then(t=>{if(t.status===500)throw new Error("Server Error: "+t.statusText);return t.json()}).then(t=>{console.log("List deleted:",t),window.location.href="index.html"}).catch(t=>{console.error("Error deleting list:",t),alert("Error deleting list.")})}function N(){fetch("http://localhost:3000/album/"+m,{method:"DELETE",headers:{"Content-Type":"application/json"}}).then(t=>{if(t.status===500)throw new Error("Server Error: "+t.statusText);return t.json()}).then(t=>{console.log("All album from list deleted:",t),window.location.href="index.html"}).catch(t=>{console.error("Error deleting all albums from list:",t)})}function x(t){var e=new Date(t),s=e.toLocaleString("default",{month:"long"}),a=e.getDate(),n=e.getFullYear();return s+" "+a+", "+n}
